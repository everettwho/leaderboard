{"ast":null,"code":"var _jsxFileName = \"/Users/everetthu/Personal/leaderboard/source-files/src/main.jsx\";\nimport React, { Component } from 'react';\nimport BigNumber from 'bignumber.js';\nimport styles from './main.module.scss';\nimport { ReactComponent as RefreshIcon } from \"@svgr/webpack?-svgo,+titleProp,+ref!./refresh.svg\";\nconst players = [{\n  name: 'E-Dawg',\n  wallet: '0x696fcAb51956D5a408A9416b703a8E012a90Db53'\n}, {\n  name: 'Moon-liano',\n  wallet: '0x0Db86254309601F625234d0819980ee8aECe0C46'\n}, {\n  name: 'Philly-G',\n  wallet: '0x930f491CaEBCBBBFF2A0deB61039E87C2b0B7fE7'\n}, {\n  name: 'Bucket Lender',\n  wallet: '0x798047D1143642069a4A70b3B845Bbaf87581bdB'\n}, {\n  name: 'Tennis Champion',\n  wallet: '0xc494711eDdFDF35BA2522Ad0D5540EA4e59Cc2B0'\n}, {\n  name: '$CNSL',\n  wallet: '0x4131d2Be8D6DA5f446c3a7Dd7bb094b27842D994'\n}, {\n  name: 'Sidding On The Moon',\n  wallet: '0x6D04151ee68759254d69dAEacD0DDB93bFd0b998'\n}, {\n  name: 'Lasik, Best Decision Ever',\n  wallet: '0x5D9AA2D7C45d8C413BD5DE26756B375C8B4ecB22'\n}, {\n  name: 'Ken Lambo',\n  wallet: '0x801B5790F335a1B6EDE241E41406460C89fC4246'\n}, {\n  name: 'Wein Moon?',\n  wallet: '0x7a94831B66A7AE1948B1a94A9555A7efa99cb426'\n}, {\n  name: 'A-A-Ron',\n  wallet: '0x1DE55cE7B9F84A5Ad147107Fe506B6f2F189f2C2'\n}];\nconst ACCOUNTS_URI = 'https://api.dydx.exchange/v1/accounts';\nconst MARKETS_URI = 'https://api.dydx.exchange/v1/markets';\nconst ZERO = new BigNumber(0);\n\nclass Leaderboard extends Component {\n  constructor(props) {\n    super(props);\n\n    this.fetchData = async () => {\n      const fetchPromises = [fetch(MARKETS_URI)];\n      players.forEach(({\n        name,\n        wallet\n      }) => {\n        fetchPromises.push(fetch(`${ACCOUNTS_URI}/${wallet}`));\n      });\n      const responses = await Promise.all(fetchPromises);\n      const responsePromises = [];\n      responses.forEach(response => {\n        responsePromises.push(response.json());\n      });\n      const [{\n        markets\n      }, ...data] = await Promise.all(responsePromises);\n      const parsedData = data.map(({\n        owner,\n        accounts\n      }) => {\n        const {\n          name\n        } = players.find(({\n          wallet\n        }) => wallet.toLowerCase() === owner.toLowerCase());\n        const totalBalances = {};\n        accounts.forEach(({\n          balances\n        }) => {\n          for (const key in balances) {\n            const {\n              marketId,\n              wei\n            } = balances[key];\n\n            if (totalBalances[marketId]) {\n              totalBalances[marketId] = totalBalances[marketId].plus(wei);\n            } else {\n              totalBalances[marketId] = new BigNumber(wei);\n            }\n          }\n        });\n        let totalValue = ZERO;\n        markets.forEach(({\n          id,\n          oraclePrice,\n          currency\n        }) => {\n          const price = new BigNumber(oraclePrice).div(`1e${36 - currency.decimals}`);\n          const balance = (totalBalances[id] || ZERO).div(`1e${currency.decimals}`);\n          totalValue = totalValue.plus(price.times(balance));\n        });\n        return {\n          name,\n          wallet: owner,\n          totalValue\n        };\n      });\n      const sortedData = parsedData.sort((a, b) => a.totalValue.minus(b.totalValue).times(-1));\n      this.setState({\n        data: sortedData\n      });\n    };\n\n    this.state = {\n      data: []\n    };\n  }\n\n  componentDidMount() {\n    this.fetchData();\n  }\n\n  renderList() {\n    const {\n      data\n    } = this.state;\n    return data.map(({\n      name,\n      wallet,\n      totalValue\n    }, idx) => React.createElement(\"div\", {\n      key: name,\n      className: styles.row,\n      onClick: () => window.open(`https://trade.dydx.exchange?wallet=${wallet}`),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 118\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: styles.nameBadge,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 123\n      },\n      __self: this\n    }, React.createElement(\"span\", {\n      className: styles[`badge${idx}`],\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 124\n      },\n      __self: this\n    }, idx + 1), name), React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 127\n      },\n      __self: this\n    }, \"$\", totalValue.toFixed(2))));\n  }\n\n  render() {\n    const {\n      data\n    } = this.state;\n    return React.createElement(\"div\", {\n      className: styles.leaderboard,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 136\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: styles.contentWrapper,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 137\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: styles.header,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 138\n      },\n      __self: this\n    }, \"dYdX Leaderboard (Feb 2020)\", React.createElement(RefreshIcon, {\n      onClick: () => {\n        this.setState({\n          data: []\n        });\n        this.fetchData();\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 140\n      },\n      __self: this\n    })), data.length > 0 ? this.renderList() : React.createElement(\"div\", {\n      className: styles.spinner,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 150\n      },\n      __self: this\n    }, React.createElement(\"img\", {\n      alt: \"\",\n      src: \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAYAAAA7MK6iAAAABGdBTUEAALGPC/xhBQAAA4lJREFUSA21lstvTVEUh++t9zPUox7R1CMhiNA0GhM66qSpAWMSiYjHyJ/AkAkSEgNGBiYmBsRjxNBEGkEkRBqNlFbRlmpxfd9x1s1pb2/T1rGSX9be6+y1fmvtvc4+p1iYhJRKpRqWbQF7wGawDNSBIugDveA1eAQ6isXib/SEomNVgXA2D9vAflALXD8r1TPQJhQ67P3YboCbJPADPa5UJYa0GY/DYAUIAtebjHpmaldnEzIB1/eAc5A/QFdIBTGE2g6CA8CxFamzBAbOEsfcdXPS9drENXCBBErosriwLCnpcQxWG4ShR7A9SdGJ/gSU5WA9aAH7QPZIgvwu9tNZ8rHEVtkOtAcYFnS8jeOgk2pC4gt5dgQcAouAMYL8Kv7nmSfig0RwamRwDESF6i/gEg5v0JMWYm1n8RVQB6In5DpBrDvoJKMCC22IMyC2yUVWd5aFvi5TFmJKegusBcazkPdgLzGH3AbFs1kMfgLfwWFwcbqk+Bbw7UadBMaU1GasB0dBoYbMJG8BEgq77yGOb9H/JMToIMB1IHHIKTklbQDzwC8g8WdwD+Qllwk0ADxOq14FmiXeBqJS9TMy/Y7ORYj1lUAWIldU3uZkNbBaz1W4PXnLfQJGxXZ5k6X7vsWtYvfZFHnLSwJapCLHGok9X28lDYpbk7f4GllxyDqJrTYQD/6H7swEHZTYLq7NGL32qn7OMuumMrR3WjMOIxK7tUsyRi/93sw8j6GXSLbi5PLowugDO1u9AeQtdrJnHJ1dtNNepSzxLm/kZvGbmosQy6aVWC7hvFyx2+05eLZufxPIS+YTKFut49813Cx2tB/4ECvfSaYrwzBdTQxJFoCo1GqH5dSgPAV2d9xgnnUrjjpNS/B15/w0ek0Kj89EkjcmISYDiR4DiUNc2E4Au3xKgs9cHLyKJZQjCuxPd7h8W/GMEy+VdqN2JJO/He4xePbPwQucHFcV/CUy0aXAYjy2aNo+/Mu3YlyTPE+InbeABhC3mWSOh8A70AX8d3auuH02kHe+PxNBJrF+Xsf+zfREtYxHV6yBrCXfBbaCCBKVRyDtBsxqE3Qelfrc9R+B1Touy6iKy1YGJFCPagSedZY4G3g8YvvE9VbZDaG7UyFViV2ZntkmhsItNaBdqY4Exmp/Ij4At9bExpUJicMj3f5a5v62+Iq5C3aqCXwDJmPj+JM/MHZbsVXIH5y6IqvXnX2mAAAAAElFTkSuQmCC\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 151\n      },\n      __self: this\n    })), React.createElement(\"div\", {\n      className: styles.creditLink,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 157\n      },\n      __self: this\n    }, \"Icons made by\", ' ', React.createElement(\"a\", {\n      href: \"https://www.flaticon.com/authors/freepik\",\n      title: \"Freepik\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 159\n      },\n      __self: this\n    }, \"Freepik\"), ' ', \"from\", ' ', React.createElement(\"a\", {\n      href: \"https://www.flaticon.com/\",\n      title: \"Flaticon\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 163\n      },\n      __self: this\n    }, \"www.flaticon.com\"))));\n  }\n\n}\n\nexport default Leaderboard;","map":{"version":3,"sources":["/Users/everetthu/Personal/leaderboard/source-files/src/main.jsx"],"names":["React","Component","BigNumber","styles","players","name","wallet","ACCOUNTS_URI","MARKETS_URI","ZERO","Leaderboard","constructor","props","fetchData","fetchPromises","fetch","forEach","push","responses","Promise","all","responsePromises","response","json","markets","data","parsedData","map","owner","accounts","find","toLowerCase","totalBalances","balances","key","marketId","wei","plus","totalValue","id","oraclePrice","currency","price","div","decimals","balance","times","sortedData","sort","a","b","minus","setState","state","componentDidMount","renderList","idx","row","window","open","nameBadge","toFixed","render","leaderboard","contentWrapper","header","length","spinner","creditLink"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport BigNumber from 'bignumber.js';\nimport styles from './main.module.scss';\n\nimport { ReactComponent as RefreshIcon } from './refresh.svg';\n\nconst players = [\n  {\n    name: 'E-Dawg',\n    wallet: '0x696fcAb51956D5a408A9416b703a8E012a90Db53',\n  },\n  {\n    name: 'Moon-liano',\n    wallet: '0x0Db86254309601F625234d0819980ee8aECe0C46',\n  },\n  {\n    name: 'Philly-G',\n    wallet: '0x930f491CaEBCBBBFF2A0deB61039E87C2b0B7fE7',\n  },\n  {\n    name: 'Bucket Lender',\n    wallet: '0x798047D1143642069a4A70b3B845Bbaf87581bdB',\n  },\n  {\n    name: 'Tennis Champion',\n    wallet: '0xc494711eDdFDF35BA2522Ad0D5540EA4e59Cc2B0',\n  },\n  {\n    name: '$CNSL',\n    wallet: '0x4131d2Be8D6DA5f446c3a7Dd7bb094b27842D994',\n  },\n  {\n    name: 'Sidding On The Moon',\n    wallet: '0x6D04151ee68759254d69dAEacD0DDB93bFd0b998',\n  },\n  {\n    name: 'Lasik, Best Decision Ever',\n    wallet: '0x5D9AA2D7C45d8C413BD5DE26756B375C8B4ecB22',\n  },\n  {\n    name: 'Ken Lambo',\n    wallet: '0x801B5790F335a1B6EDE241E41406460C89fC4246',\n  },\n  {\n    name: 'Wein Moon?',\n    wallet: '0x7a94831B66A7AE1948B1a94A9555A7efa99cb426',\n  },\n  {\n    name: 'A-A-Ron',\n    wallet: '0x1DE55cE7B9F84A5Ad147107Fe506B6f2F189f2C2',\n  },\n];\n\nconst ACCOUNTS_URI = 'https://api.dydx.exchange/v1/accounts';\nconst MARKETS_URI = 'https://api.dydx.exchange/v1/markets';\n\nconst ZERO = new BigNumber(0);\n\nclass Leaderboard extends Component {\n  constructor(props) {\n    super(props);\n    this.state = { data: [] };\n  }\n\n  componentDidMount() {\n    this.fetchData();\n  }\n\n  fetchData = async () => {\n    const fetchPromises = [fetch(MARKETS_URI)];\n\n    players.forEach(({ name, wallet }) => {\n      fetchPromises.push(fetch(`${ACCOUNTS_URI}/${wallet}`));\n    });\n\n    const responses = await Promise.all(fetchPromises);\n\n    const responsePromises = [];\n    responses.forEach(response => {\n      responsePromises.push(response.json());\n    });\n\n    const [{ markets }, ...data] = await Promise.all(responsePromises);\n\n    const parsedData = data.map(({ owner, accounts }) => {\n      const { name } = players.find(({ wallet }) => wallet.toLowerCase() === owner.toLowerCase());\n\n      const totalBalances = {};\n      accounts.forEach(({ balances }) => {\n        for (const key in balances) {\n          const { marketId, wei } = balances[key];\n\n          if (totalBalances[marketId]) {\n            totalBalances[marketId] = totalBalances[marketId].plus(wei);\n          } else {\n            totalBalances[marketId] = new BigNumber(wei);\n          }\n        }\n      });\n\n      let totalValue = ZERO;\n      markets.forEach(({ id, oraclePrice, currency }) => {\n        const price = new BigNumber(oraclePrice).div(`1e${36 - currency.decimals}`);\n        const balance = (totalBalances[id] || ZERO).div(`1e${currency.decimals}`);\n        totalValue = totalValue.plus(price.times(balance));\n      });\n\n      return { name, wallet: owner, totalValue };\n    });\n\n    const sortedData = parsedData.sort((a, b) => a.totalValue.minus(b.totalValue).times(-1));\n    this.setState({ data: sortedData });\n  };\n\n  renderList() {\n    const { data } = this.state;\n    return data.map(({ name, wallet, totalValue }, idx) => (\n      <div\n        key={name}\n        className={styles.row}\n        onClick={() => window.open(`https://trade.dydx.exchange?wallet=${wallet}`)}\n      >\n        <div className={styles.nameBadge}>\n          <span className={styles[`badge${idx}`]}>{idx + 1}</span>\n          {name}\n        </div>\n        <div>${totalValue.toFixed(2)}</div>\n      </div>\n    ));\n  }\n\n  render() {\n    const { data } = this.state;\n\n    return (\n      <div className={styles.leaderboard}>\n        <div className={styles.contentWrapper}>\n          <div className={styles.header}>\n            dYdX Leaderboard (Feb 2020)\n            <RefreshIcon\n              onClick={() => {\n                this.setState({ data: [] });\n                this.fetchData();\n              }}\n            />\n          </div>\n          {data.length > 0 ? (\n            this.renderList()\n          ) : (\n            <div className={styles.spinner}>\n              <img\n                alt=\"\"\n                src=\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAYAAAA7MK6iAAAABGdBTUEAALGPC/xhBQAAA4lJREFUSA21lstvTVEUh++t9zPUox7R1CMhiNA0GhM66qSpAWMSiYjHyJ/AkAkSEgNGBiYmBsRjxNBEGkEkRBqNlFbRlmpxfd9x1s1pb2/T1rGSX9be6+y1fmvtvc4+p1iYhJRKpRqWbQF7wGawDNSBIugDveA1eAQ6isXib/SEomNVgXA2D9vAflALXD8r1TPQJhQ67P3YboCbJPADPa5UJYa0GY/DYAUIAtebjHpmaldnEzIB1/eAc5A/QFdIBTGE2g6CA8CxFamzBAbOEsfcdXPS9drENXCBBErosriwLCnpcQxWG4ShR7A9SdGJ/gSU5WA9aAH7QPZIgvwu9tNZ8rHEVtkOtAcYFnS8jeOgk2pC4gt5dgQcAouAMYL8Kv7nmSfig0RwamRwDESF6i/gEg5v0JMWYm1n8RVQB6In5DpBrDvoJKMCC22IMyC2yUVWd5aFvi5TFmJKegusBcazkPdgLzGH3AbFs1kMfgLfwWFwcbqk+Bbw7UadBMaU1GasB0dBoYbMJG8BEgq77yGOb9H/JMToIMB1IHHIKTklbQDzwC8g8WdwD+Qllwk0ADxOq14FmiXeBqJS9TMy/Y7ORYj1lUAWIldU3uZkNbBaz1W4PXnLfQJGxXZ5k6X7vsWtYvfZFHnLSwJapCLHGok9X28lDYpbk7f4GllxyDqJrTYQD/6H7swEHZTYLq7NGL32qn7OMuumMrR3WjMOIxK7tUsyRi/93sw8j6GXSLbi5PLowugDO1u9AeQtdrJnHJ1dtNNepSzxLm/kZvGbmosQy6aVWC7hvFyx2+05eLZufxPIS+YTKFut49813Cx2tB/4ECvfSaYrwzBdTQxJFoCo1GqH5dSgPAV2d9xgnnUrjjpNS/B15/w0ek0Kj89EkjcmISYDiR4DiUNc2E4Au3xKgs9cHLyKJZQjCuxPd7h8W/GMEy+VdqN2JJO/He4xePbPwQucHFcV/CUy0aXAYjy2aNo+/Mu3YlyTPE+InbeABhC3mWSOh8A70AX8d3auuH02kHe+PxNBJrF+Xsf+zfREtYxHV6yBrCXfBbaCCBKVRyDtBsxqE3Qelfrc9R+B1Touy6iKy1YGJFCPagSedZY4G3g8YvvE9VbZDaG7UyFViV2ZntkmhsItNaBdqY4Exmp/Ij4At9bExpUJicMj3f5a5v62+Iq5C3aqCXwDJmPj+JM/MHZbsVXIH5y6IqvXnX2mAAAAAElFTkSuQmCC\"\n              />\n            </div>\n          )}\n          <div className={styles.creditLink}>\n            Icons made by{' '}\n            <a href=\"https://www.flaticon.com/authors/freepik\" title=\"Freepik\">\n              Freepik\n            </a>{' '}\n            from{' '}\n            <a href=\"https://www.flaticon.com/\" title=\"Flaticon\">\n              www.flaticon.com\n            </a>\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default Leaderboard;\n"]},"metadata":{},"sourceType":"module"}